<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ã‡∏µ‡∏ã‡∏±‡∏ô Fall 2024</title>
    <meta name="description" content="‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£, ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß, ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏®, ‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞">
    <meta name="keywords"
        content="‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞, ‡∏î‡∏±‡∏ô‡∏î‡∏≤‡∏î‡∏±‡∏ô, ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞, ‡∏Ç‡πà‡∏≤‡∏ß‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞, ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞, ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞, ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡πÉ‡∏´‡∏°‡πà, ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°, ‡∏ô‡∏≤‡∏¢‡πÇ‡∏î‡∏î‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏ï‡πà‡∏≤‡∏á‡πÇ‡∏•‡∏Å, ‡∏£‡∏±‡∏Å‡∏£‡∏±‡∏Å‡∏£‡∏±‡∏Å‡∏£‡∏±‡∏Å‡∏£‡∏±‡∏Å‡πÄ‡∏ò‡∏≠‡∏´‡∏°‡∏î‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏à‡∏≤‡∏Å‡πÅ‡∏ü‡∏ô‡∏™‡∏≤‡∏ß 100 ‡∏Ñ‡∏ô, [2024], [Fall]">
    <meta name="author" content="Night">

    <meta property="og:title" content="‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡πÉ‡∏´‡∏°‡πà ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞">
    <meta property="og:description"
        content="‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞, ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞, ‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà!">
    <meta property="og:image" content="https://ani-night.online/logo/Aninight.png">
    <meta property="og:url" content="https://ani-night.online/schedule/anime">
    <meta property="og:type" content="website">

    <!-- CSS & JS -->
    <link rel="shortcut icon" href="/logo/favicon.png" type="image/x-icon">
    <script src="/css/tailwindcss.css"></script>
    <script src="/js/fontawesome.js" defer></script>
    <link rel="shortcut icon" href="/logo/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/css/pages/schedule.css">
    <script src="https://kit.fontawesome.com/df26bd9708.js" crossorigin="anonymous"></script>
</head>
<body class="bg-gray-100 text-black">

    <div class="flex flex-col h-screen">
        <!-- Header Section -->
        <%- include('./Component/header') %>

        <div class="flex flex-1 overflow-hidden">
            <!-- Aside Section -->
            <aside id="aside" class="bg-white w-64 h-full fixed lg:relative transform -translate-x-full lg:translate-x-0 transition-transform z-50">
                <%- include('./Component/adside') %>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 p-4 bg-gray-50 overflow-hidden overflow-y-auto transition-all" id="MainContent">

                <section class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white rounded-lg mb-5">
                    <div class=" mx-auto px-4 py-16 flex flex-col md:flex-row items-center">
                      <!-- Text Section -->
                      <div class="flex-1 text-center md:text-left">
                        <h1 class="text-4xl md:text-6xl font-bold leading-tight mb-4">
                          ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡πà‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö <span class="text-yellow-300">‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞</span> ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
                        </h1>
                        <p class="text-lg md:text-xl mb-6">
                          ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏≠‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏® ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß ‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡∏ó‡∏∏‡∏Å‡∏ã‡∏µ‡∏ã‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
                        </p>
                        <div class="flex justify-center md:justify-start space-x-4">
                          <a href="#scheduleAnime" class="px-6 py-3 bg-yellow-300 text-indigo-800 rounded-lg font-medium hover:bg-yellow-400">
                            ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞ üëá
                          </a>
                          <a href="#news" class="px-6 py-3 bg-white text-indigo-800 rounded-lg font-medium hover:bg-gray-100">
                            ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πà‡∏≤‡∏ß‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                          </a>
                        </div>
                      </div>
                  
                      <!-- Image Section -->
                      <div class="flex-1 mt-10 md:mt-0 flex justify-center">
                        <img src="" 
                             alt="Anime Hero" 
                             class="rounded-lg max-w-xs h-[300px] object-cover md:max-w-md lg:max-w-lg">
                      </div>
                    </div>
                </section>
                  
                <!-- Content goes here -->
                 <div class="flex justify-between" id="scheduleAnime">
                    <div>
                        <h2 class="text-base md:text-2xl font-light">‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                    </div>
                 </div>

                 <div class="bg-white rounded-lg md:mb-12 mb-2 p-4" style="height: auto !important;">
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6579807593228261"
                    crossorigin="anonymous"></script>
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-format="fluid"
                    data-ad-layout-key="-fb+5w+4e-db+86"
                    data-ad-client="ca-pub-6579807593228261"
                    data-ad-slot="2392656865"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
                  </div>
                 
                 <div id="anime-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 lg:gap-10 mt-5 mb-5">
                    <!-- ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô container ‡∏ô‡∏µ‡πâ -->
                </div>

                <div id="loading" class="text-center py-4">
                    <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πâ‡∏≤‡∏ö‡∏ö...</p>
                </div>
            </main>
        </div>
    </div>

    <!-- Sidebar Toggle Script -->
    <script>
        const BTN_MENU_TOGGLE = document.getElementById("menuButton");
        const ASIDE_BAR = document.getElementById("aside");

        BTN_MENU_TOGGLE?.addEventListener("click", () => {
            ASIDE_BAR.classList.toggle("-translate-x-full");
        });

        let currentPage = 1;
        let isLoading = false; // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ã‡πâ‡∏≥
        const container = document.getElementById('anime-container');

        const loadAnime = async (page) => {
            if (isLoading) return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏¢‡∏π‡πà
            isLoading = true;
            try {
                const response = await fetch(`/api/v2/schedule/anime?page=${page}`);
                const data = await response.json();

                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô container
                data.Animelists.forEach(anime => {
                    const isNew = anime.animenew ? `<span class="absolute top-0 right-0 bg-red-500 text-white px-2 py-1 rounded-bl-lg">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</span>` : '';
                    const animeCard = `
                        <div class="anime-card overflow-hidden relative">
                    <a href="/anime/${anime.urlslug}" class="cover w-[150px] h-[225px] sm:h-[115px] rounded-lg overflow-hidden">
                        <img src="${anime.poster.startsWith('http') ? anime.poster : (anime.poster ? '/uploads/posters/' + anime.poster : 'https://via.placeholder.com/400x200')}" 
                            alt="${anime.title.en}" class="w-full rounded-lg" loading="lazy">
                        ${isNew} <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡πâ‡∏≤‡∏¢ "‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà" ‡∏ñ‡πâ‡∏≤ animenew ‡πÄ‡∏õ‡πá‡∏ô true -->
                    </a>
                    <a class="anime-info title" href="/anime/${anime.urlslug}">
                        <h2 class="text-sm font-bold">${anime.title.th || anime.title.en}</h2>
                    </a>
                </div>
            `;
                    container.insertAdjacentHTML('beforeend', animeCard);
                });

                // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                if (!data.hasNext) {
                    document.getElementById('loading').classList.add('hidden');
                    // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏´‡∏ô‡πâ‡∏≤
                    document.getElementById('MainContent').removeEventListener('scroll', handleScroll);
                } else {
                    currentPage += 1; // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                }
            } catch (error) {
                console.error('Error loading anime:', error);
            } finally {
                isLoading = false; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î
            }
        };

        const handleScroll = () => {
            const mainContent = document.getElementById('MainContent');
            const { scrollTop, scrollHeight, clientHeight } = mainContent;
            if (scrollTop + clientHeight >= scrollHeight - 5) {
                loadAnime(currentPage);
            }
        };

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô
        document.getElementById('MainContent').addEventListener('scroll', handleScroll);

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
        loadAnime(currentPage);

    </script>
    </body>
</html>
